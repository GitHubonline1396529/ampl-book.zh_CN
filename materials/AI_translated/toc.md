

# 目录

引言 xv

# 第 1 章 生产模型：利润最大化 1

1.1 一个双变量线性规划 (linear program) 2  
1.2 在 AMPL 中的双变量线性规划 5  
1.3 一个线性规划模型 6  
1.4 在 AMPL 中的线性规划模型 7  
基础模型 8  
改进模型 10  
捕捉错误 12  
1.5 向模型添加下界 13  
1.6 向模型添加资源约束 15  
1.7 AMPL 接口 18

# 第 2 章 饮食及其他输入模型：成本最小化 27

2.1 饮食问题的线性规划 27  
2.2 饮食问题的 AMPL 模型 30  
2.3 使用 AMPL 饮食模型 32  
2.4 混合、经济和调度问题的推广 37

# 第 3 章 运输和指派模型 43

3.1 运输问题的线性规划 44  
3.2 运输问题的 AMPL 模型 45  
3.3 运输模型的其他解释 49

# 第 4 章 构建更大的模型 55

4.1 多商品运输模型 56  
4.2 多周期生产模型 59  
4.3 生产与运输模型 63

# 第 5 章 简单集合与索引 73

5.1 无序集合 73

5.2　数集 75  
5.3　集合运算 76  
5.4　集合成员运算与函数 78  
5.5　索引表达式 79  
5.6　有序集 82  
预定义集与区间表达式 86  

# 第 6 章　复合集与索引 91  

6.1　有序对集 91  
6.2　有序对的子集与切片 93  
6.3　更长元组的集合 96  
6.4　元组集合上的运算 98  
6.5　集合的索引族 100  

# 第 7 章　参数与表达式 109  

7.1　参数声明 110  
7.2　算术表达式 111  
7.3　逻辑与条件表达式 114  
7.4　参数的限制 116  
7.5　计算参数 118  
7.6　随机生成参数 121  
7.7　逻辑参数 122  
7.8　符号参数 123  

# 第 8 章　线性规划：变量、目标与约束 129  

8.1　变量 129  
8.2　线性表达式 132  
8.3　目标 134  
8.4　约束 137  

# 第 9 章　指定数据 143  

9.1　格式化数据：data 命令 143  
9.2　列表中的数据 145  
一维集合与参数列表 145  
二维集合与参数列表 146  
高维集合与参数列表 148  
集合与参数的组合列表 151  

9.3　表格中的数据 154  
二维表格 154  
高维数据的二维切片 156  
高维表格 157  
格式选择 159  

9.4　数据语句的其他特性 160  
默认值 160  
集合的索引族 161  
变量的初始值 162  

9.5　读取非格式化数据：read 命令 163  

# 第 10 章　数据库访问 169  

10.1　数据对应的一般原则 169  
10.2　表处理语句示例 174  
10.3　从关系表中读取数据 180  
仅读取参数 180  
读取集合与参数 182  
建立对应关系 184  
读取其他值 185  
10.4　向关系表中写入数据 186  
根据数据规范推断写入行 186  
根据键规范推断写入行 189  
10.5　读写同一张表 191  
使用两个表声明进行读写 192  
使用同一张表声明进行读写 193  
10.6　表与列的索引族 193  
表的索引族 193  
数据列的索引族 196  
10.7　标准与内置表处理器 197  
使用标准 ODBC 表处理器 198  
在 Access 与 Excel 中使用标准 ODBC 表处理器 200  
用于文本与二进制文件的内置表处理器 201  

# 第 11 章　建模命令 203  

11.1　命令与选项的一般原则 203  
命令 204  
选项 204  
11.2　模型与数据的设置与求解 206  
输入模型与数据 206  
求解模型 207  
11.3　修改数据 209  
重置 209  
重采样 209  
let 命令 210  
11.4　修改模型 212  
移除或重新定义模型组件 213  
更改模型：fix、unfix；drop、restore 214  
松弛整数性 215  

# 第 12 章　显示命令 219

12.1 浏览结果：display 命令 219  
显示集 220  
显示参数和变量 220  
显示索引表达式 224  
12.2 display 的格式化选项 227  

列表和表格的排列 227  
行宽控制 229  
零值抑制 231  
12.3 display 的数值选项 232  
数值显示外观 233  
解值舍入 236  
12.4 其他输出命令：print 和 printf 238  
print 命令 238  
print 命令 239  
12.5 相关解值 240  
目标函数 240  
界限和松弛变量 241  
对偶值和约简成本 243  
12.6 模型和实例的其他显示功能 245  
显示模型组件：show 命令 246  
显示模型依赖关系：xref 命令 247  
显示模型实例：expand 命令 247  
变量、约束和目标的通用同义词 249  
资源列表 250  
12.7 操作输出的通用工具 251  
输出重定向 251  
输出日志 251  
消息限制 252  

# 第 13 章 命令脚本 255  

第 13 章 命令脚本 255  
13.1 运行脚本：include 和 commands 255  
13.2 遍历集合：for 语句 258  
13.3 条件遍历：repeat 语句 262  
13.4 条件测试：if-then-else 语句 264  
13.5 终止循环：break 和 continue 266  
13.6 脚本逐步执行 268  
13.7 字符串操作 270  
字符串函数和运算符 270  
AMPL 命令中的字符串表达式 273  

# 第 14 章 与求解器的交互 275  

第 14 章 与求解器的交互 275  
14.1 Presolve 275  
Presolve 阶段的活动 276  
控制 presolve 的效果 278  
在 presolve 中检测不可行性 279  
14.2 从求解器检索结果 282  
求解结果 282  
目标和问题的求解器状态 286  
变量的求解器状态 287  
约束的求解器状态 291  
AMPL 状态 293  

14.3 通过后缀与求解器交换信息 295  
用户定义的后缀：整数规划指令 296  
求解器定义的后缀：敏感性分析 298  
求解器定义的后缀：不可行性诊断 299  
求解器定义的后缀：无界方向 300  
定义和使用后缀 302  
14.4 模型之间的交替 304  
14.5 命名问题 309  
定义命名问题 311  
使用命名问题 314  
显示命名问题 315  
定义和使用命名环境 316  

# 第 15 章 网络线性规划 319  

15.1 最小费用转运模型 319  
一般转运模型 320  
专门化转运模型 323  
转运模型的变化形式 326  

15.2 其他网络模型 328  
最大流模型 328  
最短路径模型 329  
运输和指派模型 330  

15.3 按节点和弧声明网络模型 333  
一般转运模型 334  
专门化转运模型 335  
转运模型的变化形式 336  
最大流模型 337

15.4 节点和弧声明规则 340 节点声明 340 弧声明 340 与目标声明的交互 341 与约束声明的交互 342 与变量声明的交互 342

15.5 求解网络线性规划 343

# 第 16 章 列式公式 353

16.1 一个投入产出模型 354 按约束公式化 354 列式公式化 355 列式公式的改进 357

16.2 一个调度模型 359 16.3 列式公式的规则 362

# 第 17 章 分段线性规划 365

17.1 成本项 366 固定段数 366

可变段数 36817.2 常见的两段和三段项 369 “软”约束的惩罚项 369 处理不可行性 373 可逆活动 377 17.3 其他分段线性函数 379 17.4 分段线性优化指南 382 分段线性表达式的形式 382 分段线性模型的建议 383

# 第 18 章 非线性规划 391

18.1 非线性的来源 392 放弃线性假设 393 实现非线性效应 396 建模本质上非线性的过程 397

18.2 非线性变量 397 变量的初始值 398 变量的自动替换 399

18.3 非线性表达式 400 18.4 非线性规划的陷阱 403 函数范围违规 403 多个局部最优解 407 其他陷阱 410

# 第 19 章 互补问题 419

19.1 互补性的来源 419 生产经济学的互补模型 420 有界变量的互补性 423 价格依赖需求的互补性 425 其他互补模型和应用 426

19.2 互补约束的形式 427 19.3 使用互补约束 428 相关解值 428 预求解 429 通用同义词 431

# 第 20 章 整数线性规划 437

20.1 整数变量 438 20.2 零一变量和逻辑条件 439 固定成本 440 零或最小限制 444 基数限制 445 20.3 整数规划中的实际考虑 448

# 附录 A. AMPL 参考手册 453

附录 A. AMPL 参考手册 453  
A.1 词法规则 453  
A.2 集合成员 454  
A.3 索引表达式与下标 455  
A.4 表达式 455  
A.4.1 内置函数 458  
A.4.2 字符串与正则表达式 459  
A.4.3 分段线性项 460  
A.5 模型实体的声明 461  
A.6 集合声明 461  
A.6.1 基数与元数函数 462  
A.6.2 有序集合 463  
A.6.3 区间与其他无限集合 463  
A.7 参数声明 465  
A.7.1 检查语句 465  
A.7.2 无穷大 466  
A.8 变量声明 466  
A.8.1 定义变量 467  
A.9 约束声明 468  
A.9.1 互补约束 469  
A.10 目标声明 470  
A.11 辅助值的后缀表示法 470  
A.11.1 后缀声明 471  
A.11.2 状态 473  
A.12 标准数据格式 473  
A.12.1 集合数据 473  
A.12.2 参数数据 475  
A.13 数据库访问与表格 477  
A.14 命令语言概述 479  
A.14.1 选项与环境变量 481  
A.15 输入与输出的重定向 481  
A.16 打印与显示命令 482  
A.17 读取数据 484  
A.18 建模命令 485  
A.18.1 solve 命令 485  
A.18.2 solution 命令 487  
A.18.3 write 命令 487  
A.18.4 辅助文件 487  
A.18.5 更改模型：delete、purge、redeclare 488  
A.18.6 drop、restore 与 objective 命令 489  
A.18.7 fix 与 unfix 命令 489  
A.18.8 命名问题与环境 489  
A.18.9 修改数据：reset、update、let 490  
A.19 检查模型 491  
A.19.1 show 命令 491  
A.19.2 xref 命令 492  
A.19.3 expand 命令 492  
A.19.4 通用名称 492  
A.19.5 check 命令 492  
A.20 脚本与控制流语句 492  
A.20.1 for、repeat 与 if-then-else 语句 493  
A.20.2 逐步执行命令 495  
A.21 计算环境 495  
A.21.1 shell 命令 495  
A.21.2 cd 命令 495  
A.21.3 quit、exit 与 end 命令 496  
A.21.4 内置计时参数 496  
A.21.5 日志记录 496  
A.22 导入函数 497  
A.23 AMPL 调用 499  

索引 501  